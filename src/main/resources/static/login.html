<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>login</title>
    <script src="./jQuery/jquery-3.5.1.slim.min.js"></script>
    <script src="./jQuery/jquery-3.5.1.min.js"></script>
    <link rel = "stylesheet" href = "./jQueryUI-1.13.2/jquery-ui.min.css">
    <link rel = "stylesheet" href = "./jQueryUI-1.13.2/jquery-ui.structure.min.css">
    <link rel = "stylesheet" href = "./jQueryUI-1.13.2/jquery-ui.theme.min.css">
    <script src="./jQueryUI-1.13.2/jquery-ui.min.js"></script>
</head>
<body>
<label for="username">用户名:</label><input type="text" id="username" required placeholder="用户名"><br>
<label for="password">密&nbsp;&nbsp;&nbsp;码:</label><input type="password" id="password" required placeholder="密码"><br>
<button type="button" class="ui-button" id="tologin">登录</button>
<button type="button" class="ui-button" id="back">返回</button>
</body>
<script>
    $(document).on('click', '#tologin' , function () {
        var result;
        $.ajax({
            url: "/user/loginUser",
            type: "post",
            data: {
                username: $("#username").val(),
                password: $("#password").val()
            },
            dataType: "json",
            async: false,
            success: function (data) {
                result = data;
            },
            error: function (errorMsg) {
                alert("error!" + errorMsg);
                console.log(errorMsg);
            }
        });
        localStorage.setItem("loginUser", result['loginUser']);
        localStorage.setItem("userid", result['userid']);
        localStorage.setItem("status", result['status']);
        alert(result['msg']);
        location.href ='/home.html';
    });
    $(document).keydown(function(event){
        if(event.keyCode === 13){
            document.getElementById("tologin").click();
        }
    });
    $("#back").on('click', function(){
        location.href="index.html";
    });
</script>
</html>