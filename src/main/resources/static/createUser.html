<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>createUser</title>
    <script src="./jQuery/jquery-3.5.1.slim.min.js"></script>
    <script src="./jQuery/jquery-3.5.1.min.js"></script>
    <link rel = "stylesheet" href = "./jQueryUI-1.13.2/jquery-ui.min.css">
    <link rel = "stylesheet" href = "./jQueryUI-1.13.2/jquery-ui.structure.min.css">
    <link rel = "stylesheet" href = "./jQueryUI-1.13.2/jquery-ui.theme.min.css">
    <script src="./jQueryUI-1.13.2/jquery-ui.min.js"></script>
</head>
<body>
<div id="root">
    <input id="nickname" type="text" placeholder="昵称">
    <input id="username" type="text" placeholder="用户名">
    <input id="password" type="password" placeholder="密码">
    <input id="papasswordAgainssword" type="password" placeholder="再次输入密码">
    <input id="sure" type="button" class="ui-button" value="确认">
    <input id="back" type="button" class="ui-button" value="返回">
</div>
<script>
    $(document).ready(function(){
        $(document).keydown(function(event){
            if(event.keyCode === 13){
                document.getElementById("sure").click();
            }
        });
        $("sure").on('click', function(){
            var nickname=$("#nickname").val();
            var username=$("#username").val();
            var password=$("#password").val();
            var passagain=$("#papasswordAgainssword").val();
            $.ajax({
                url: "/user/createUser",
                type: "post",
                data: {
                    nickname: nickname,
                    username: username,
                    password: password,
                    password_2: passagain
                },
                dataType: "json",
                async: false,
                success: function(data){
                    if(data === "login.html"){
                        alert("注册成功！");
                    }
                    else if(data === "createUser.html"){
                        alert("注册出错！");
                    }
                    location.href=data;
                },
                error: function(e){
                    console.log(e);
                }
            });
        });
        $("#back").on('click', function(){
            location.href="index.html";
        });
    });
</script>
</body>
</html>