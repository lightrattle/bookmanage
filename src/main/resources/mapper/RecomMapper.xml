<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bookmanage.mapper.RecomMapper">
    <select id="getRecomListByBooktype" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and books.booktype = #{booktype}
    </select>

    <select id="getRecomListByUserid" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and userid = #{userid}
    </select>

    <select id="getRecomListByMajor" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and major = #{major}
    </select>

    <select id="getRecomListByMajorAndDevelop" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and major = #{major} and develop = #{develop}
    </select>

    <select id="getRecomListByBookid" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and recom.bookid = #{bookid}
    </select>
<!--    public List<Map<String, Object>> getBooksByRecomAndUserid(int userid);-->

<!--    public List<Map<String, Object>> getBooksByRecomAndMajor(String major);-->

<!--    public List<Map<String, Object>> getBooksByRecomAndDevelop(String develop);-->
    <select id="getBooksByRecomAndUserid" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and recom.userid = #{userid}
    </select>

    <select id="getBooksByRecomAndMajor" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and recom.major = #{major}
    </select>

    <select id="getBooksByRecomAndDevelop" resultType="java.util.HashMap">
        select recomid, userid, major, develop, books.bookid, reason,
               bookname, booktype, lendnum, image, allnum, intro, remainnum
        from recom, books where books.bookid = recom.bookid and recom.major = #{major} and recom.develop = #{develop}
    </select>

    <insert id="insertOneRecom">
        insert into `recom`(userid, major, develop, bookid, reason)
            values (#{userid}, #{major}, #{develop}, #{bookid}, #{reason})
    </insert>

    <delete id="deleteOneRecom">
        delete from `recom` where recomid = #{recomid}
    </delete>
</mapper>